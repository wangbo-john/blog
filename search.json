[{"title":"预告-准备写 (released) CPU microArchitect","url":"/blog/tech/forecast-undefined.html","content":"\n苦恼中，既想介绍又担心写多了惹麻烦\n省事点，从老芯片skylake开始吧。。。\n","tags":["Android","driver","userspace"],"categories":["tech"]},{"title":"a new paper about software configuration management","url":"/blog/tech/a_new_paper-undefined.html","content":"\n\n最近（21年3月）发了篇新paper。好像和某个job的要求刚好比较一致：\n[customer BIOS configuration Challenges and Solution](/img/customer_BIOS_configuration_Challenges_and_Solution.pdf)\n\n客户不再使用默认配置，造成一些问题。\n积极主动的测试策略可在一定程度上减轻其影响。\n但软件配置管理的问题其实根本上是客户需求管理……\n","tags":["software","configuration","management","requirement"],"categories":["tech"]},{"title":"can I dev an insurance app with the Blockchain?","url":"/blog/research/undefined-undefined.html","content":"\n\n侵权取证和认定很困难。\n\n开发一种新保险，帮助被侵权者怎么样？\n会不会很多人骗保？\n","tags":["界定","法律","保险"],"categories":["存疑"]},{"title":"今月曾经照古人——史前天文与数学","url":"/blog/human/undefined-undefined.html","content":"#### 　　智人在各种人类和猛兽的丛林中战战兢兢存活下来，迫切希望能了解这个世界。高高在上性格各异的星辰无疑具有极其重大的启示作用。这些星辰很可能指示着人类的命运，那就观察观察，研究研究？\n\n#### 　　对于明确知道自己处在大陆东方的人类，他们比较幸运。虽然最亮的星星们好像都是全球共享，从一方升起、穿越天穹后在另一方落下，但是其中有一颗，却只在东方升起、落下。这颗眷顾东方的星辰逐渐培养了东方人祖先的一种信心和气魄：通过努力，可以掌控自己的命运。\n\n<!--more-->\n&nbsp;\n&nbsp;\n　　这是2020年4月19日凌晨4点，上海夜空中的景色，主角是太阳系最亮的几颗行星（还有一颗卫星——月球）：\n![古人也见过的木水火土星与月，再等一两小时金星与太阳同出](/img/2020/mu_huo_shui_moon_in_a_line.jpg \"曾照古人的星与月\")\n　　天空中最亮的几颗星排成整齐的一行，显得很特殊，和其它星星都不一样。\n　　远古时期的人类祖先，应该会比我们现代人更经常地观察天空，以获得上天的启示。他们肯定也经常看到图片中的景象。\n\n　　图片中的时间再过46分钟，尚未露面的大佬——太阳，发出的光芒，开始将天边染成橙黄，这时水星会悄悄露出地平线，肉眼可见。最有意思的是，新加入的这位水星，一眼就能看出和第一张图片中几颗星星是一伙的，因为新露面的水星和它们站在同一条直线上。\n![五星连珠](/img/2020/mu_huo_shui_moon_water_in_a_line.jpg \"五星连珠月亮算吗？\")\n\n　　这是地球人在天空中所能看到的最明亮的七颗星体，以及它们的亮度：\n\n| 天体 | 星等  |      | 天体 | 星等 |\n| :--: | :---: | :--: | :--: | :--: |\n| 太阳 | -26.7 |      | 木星 | -2.7 |\n| 满月 | -12.6 |      | 水星 | -1.9 |\n| 金星 | -4.4  |      | 土星 | -0.3 |\n|  |   |      | 火星 | -2.0 |\n\n　　星等就是亮度的数字化表示，星等值越小，那颗星就越亮（瞅瞅太阳的星等就很容易明白，哪种数字更亮）。\n\n　　古人很容易就能发现，最明亮的这些星星（包括太阳），一年中绝大多数时间都处在一条直线上。只有相互间几乎重合时才能看出它们之间并不是严格的直线，但是和巨大的天空背景相比，这种偏离直线的幅度很小。其实有那么一点点偏离，在原始人看来也许更说明星星们是有自主性的高级神仙，而不是单调死守规矩的机器人。有时候上表内一部分成员会隐没在地平线以下，可是它们从哪里升起、又从哪里沉入地平线，都是有规律可循的。\n\n　　为什么所有行星，包括太阳，会排成一条直线，而不像大雁那样一会儿一字一会儿人字？\n![黄道面](/img/2020/astronomy_and_math/黄道面.jpg \"黄道面\")\n![黄道面](/img/2020/astronomy_and_math/黄道面.gif \"黄道面\")\n　　因为太阳系所有行星都在一个称之为“黄道面”的平面内绕太阳运动。你假想一下太阳和所有行星，包括地球，都在同一张白纸上，从地球上看其它星球，它们是不是就一直在一条直线上？\n\n\n### 预测星星出现或隐没点\n　　既然已经知道这几颗星会排成一行，那么它们出现或隐没的那个点，就是天空中已有的亮仔成员连成的直线，和地平线之间的交点。\n　　于是形成最早的几何概念——两条直线，及其交点。\n\n### 发现星星活动有规律性\n　　通过坚持观测、记录，原始人会发现这几颗代表神仙的最亮的星星们的活动既有规律，又有各自的特点。\n　　它们每过一个固定的周期就会重复自己的行为。\n\n### 西方7天的来历\n　　上面表格里的7颗星，除了在全天域范围内亮度最高，它们还是太阳系内行星（含一颗特殊恒星），它们自行组队的行为明显区别于其它恒星。所以西方人把7作为一个重要的数字传承下来。后来圣经里就出现上帝花了6天时间创造世界，歇一天的故事，加起来正好是7天。\n\n\n\n\n　　下面这张表，是在地球上能观测到的行星运动周期，数万年前的古人和我们当代人的数据变动不大：\n\n|  最亮的星辰   | 公转周期（日）  | 换算成月 | 换算成年 |\n|  :---:  | :---:  | :---: | :---: |\n|  太阳   | 365有余，366不足 | 12 |  1  |\n|  月亮   | 30 | 1 |  1/12  |\n|  金星   | 224.7  | ~7.5 | 每两周期1¼年  |\n|  水星   | 87.9691  | ~3 | ¼  |\n|  木星   | 4332.589  | ~144 | 12  |\n|  土星   | 10832.327  | ~360 | 30  |\n|  火星   | 686.971  | ~22.6 | 1.88 |\n\n　　这些系内行星的公转周期很容易取整，火星是个例外，它总是带着很长而且不规律的小数部分。所以东西方最远古时代的原始人都没办法把它纳入某种神秘学说里，没有把它纳入常规观测范围内。\n\n### 地球人根据这张表得到12进制\n　　如果不算土星，前面日、月、金、水、木五颗星公转周期的最小公倍数是12。也就是说，每隔12年，站在地面观察的我们，就能看到 日、月、金、水、木 五颗星完全重复之前的轨迹，包括它们相互之间的站位，都非常完美地重复。\n　　观测天文活动，帮助最初的人类学到最小公倍数这样的数学概念。也许还不成系统，但数学慢慢总会发展起来。\n　　地面上，12个月盈月亏就是一年；天空中，每过12年，最亮的几颗星星们之间的关系就会重复一遍。\n　　最初的12进制在这样的重复熏陶之下，慢慢开始成型。\n　　西方人的祖先得到12进制后，就停下来了。\n　　因为他们发现超过12之后，事情会发生变化。\n　　因此，13是个特别不吉利的数字。\n　　比如，不信邪的耶稣收了13个徒弟，老13比前面12个徒弟都有名，他叫犹大。\n\n\n\n### 同样一群系内行星，我们不但得到12进制，还有一个中国特有的进制单位——60年一甲子\n\n　　12进制和西方一样，没啥好讲的。中国有十二生肖，我嘚瑟了吗？\n\n　　得到12进制后，中国人的祖先走得更远。\n　　西方放弃火星、土星，按道理那时人类文明还没有出现分支，中国大地上的人类祖先也应该放弃才是，因为观测这两颗行星的难度对于全体地球人都是一样的。但不同的是，我们祖先非常重视土星，一定要把它包含进自己的常规观测范围。\n　　为什么？\n　　除去很特别的日、月两位爸妈级别影响力的强力星球，夜空中满天星斗，其中最亮的、应当是神仙首领的4颗神秘星星，它们并不是满天空乱窜的，恰恰相反，它们的升降非常有规律。\n　　**金星**通常要等到后半夜才在东方、略偏东北的方向上升起，绕天行走到西方准备落下时，恰好是凌晨。所以勤劳早起的古人认为太白金星是居住在西方的启明星；\n　　**木星**下午时就从东方升起，等到傍晚天色暗下来看到它时，它已经挂在天空中很高的地方，然后慢慢滑经南方天空走到西方落下。落下时通常转钟不久（方言），也就是前后两天刚刚交替的子时（不到0:30就已完全落下）；再加上它的公转周期正好是12年，可以很方便地产生地支纪年法，于是古人称其为岁星。后来有传说它是位于东方的木之精华，是青帝之子，于是有了木星这个名字。至于木之精华这个传说的来源，是不是因为有超级远视眼（千里眼++）真的看到了木星的木纹，我就不知道了。\n　　**水星**是这几颗星里面最难观测的。它名叫水星，却偏偏常年都紧跟太阳，几乎总是出现在离太阳不远的方向上，像是太阳公公的随行秘书，因此也是昼出夜伏，停在我们头顶时就是正午时分，肉眼看不到。看到它的通常都以欣赏日出日落美景的人居多。不过这样一来，它的方位就很容易确定，相对于北半球中国土地上的人，它常年都处于偏南方的位置；\n　　前面三颗星都是满天跑，属于全人类的，尤其那颗住在西方的太白金星。\n　　可是还有这样一颗星——位列四大之一，却坚守东方，常年只在东方、略偏东南方向上升降，非常特别。它是太阳系第二大行星——**土星**。\n　　这就是为什么西方人不舍得花大力气，东方人却觉得需要认真观测土星的原因。土星对于东方的偏爱，不仅仅让我们祖先觉得有必要了解一下它，更在无意中从遥远的太空给这种挑战极限的科研行为以精神上的支持，一直培育着中国人祖先相对其它方向人类族群的优越感。\n　　很明显，中国人的祖先们认为天上住着神仙，这些明亮的星辰可能是神仙本仙、也可能是神仙的住处。星辰运动神秘而有规律，重复观察它们就能获得神仙们的一些启示。而对于其中常驻东方的土星，获得它的启示尤其重要。\n　　最早的负责天文观测的家族很可能就是黄帝家族，因为观测土星的职责或成就，而自称拥有土德。\n\n*【题外话】其实火星的升降规律和木星很接近，但它“无规律”的公转周期让人头疼。除了周期问题，火星的亮度也经常改变，行踪不定，令人迷惑（升起点在东——东北方位、降落点在西——西北方位之间游走），连远古中国土地上这些猛人们都不得不放弃，给它取名“荧惑星”。萤火是它的颜色，惑则是它的迷惑行为。*\n\n\n\n#### 60年一甲子\n\n　　可是土星的公转周期长达30年。如果想把土星也包含进重点观察名单，必须要找到一个既有效（观察到土星的全部活动）、又经济（最好在人的有生之年能观察到所有对象的重复行为）的周期。\n　　现在，我们知道，中国的一甲子是60年而不是更大的数，说明中国人祖先很早就已掌握最小公倍数的概念和运用。\n　　每一甲子，即60年，我们能看到 日、月、金、水、木、土 六颗星完全重复之前的轨迹。\n　　今天我们说起一甲子，只是一个数字而已，没什么感觉。可是在很长久的历史时期里，这都是一种气魄。不只是一种倾尽全力去追求、维护某种完备性的努力，还有相应的相信这件事儿能办成的气魄。这种气魄最早由一颗眷顾东方的行星逐渐培养起来，但经过数万年的内化，已经深深刻印在中华文明的内核之中，无法抹去了。\n\n　　印度人的经典中，都在追求无尽无边无上的超越人类能想象到的最大智慧的某种智慧。我很尊重他们的专心恒心努力和想象力，可是在我看来他们还缺乏某种气魄。西方人毕业旅行都喜欢去印度寻找灵感，我感觉他们找错了方向，就象修行佛教落入了小乘。当然这里不包括那位被吹成神的乔布斯，他的行事风格表明他有极其强烈的操控欲望，个人性格正好弥补了印度文化上的这种缺憾。而拥有太强烈操控欲望的人反倒不大适合学习中国文化的。\n\n　　公元前2000年建立的古巴比伦王国很意外地也采用了60进制。按道理那里民族复杂，统治者经常更换，不应该出现这么复杂的进位制，毕竟60进制从产生、学习到使用都需要大量的时间和精力，似乎只有在非常稳定、富足的环境下才能产生。古巴比伦和现在的中东土豪们一样，只能满足后者却无法满足前者。不管怎么说，会用60进制的，都hin牛逼！\n　　但是古巴比伦的60进制和中国不一样，他们使用了59个不同的符号来表示1-59（没有0），而中国是地支（12进制）循环5次组成的60。\n　　*猜测：感觉中国的60进制是活的，古巴比伦是呆板的（或者有人说这是因为他们的60进制更早？）。要么中国人最初算12和30的最小公倍数算错成120（天干x地支），后来才修正成60的（修改了天干地支的组合规则，只允许天干和地支分别阳阳、阴阴组合，而不允许阴阳、阳阴组合，去掉一半变成了60进制）？*\n\n　　虽然古巴比伦的消亡同时也带走了中东地区60进制产生之谜的答案，但是那里却有一本书，《圣经》旧约，是唯一一本在中国典籍之外，我能找到一种熟悉的感觉的书。虽然时不时还是会出戏，比如以色列国王的日常工作居然需要审理失窃案，这其实也带来一些亲切感，颇有些中国地方戏曲里“东宫娘娘烙大饼，西宫娘娘剥大葱，皇上顿顿吃白馍，皇后娘娘用金扁担”的影子。排除这些小事件，完全看不出这本书是在讲一个历史上最强盛时期也只在中东几十小国中处于中游的一个国家，整部书有一种宏大的大国气魄，很有内个味儿——一种读我泱泱中华古籍的感觉，难怪它能成为数个宗教都共同承认的经典。\n　　*刚刚写了“唯一1本”，就又想到另一本书，也有读中国典籍的感觉，但不是因为它的气势，而是儒道般的言论。这第二本书是200多年前米国某开国元勋的自传。我算它文明交流的产物了，后边有机会会提到。*\n\n\n#### 5进制\n\n　　因为60和12之间的倍数关系，5变成一个很重要的数——这个数自古就和运势相关，这其实是60带来的红利。60是从天文观测得到的数字，天生就带着预测命运的神秘色彩，和60有关的数字也跟着沾光。\n　　5进制的来由，其实更多的和生命有关，而并非天文观测。\n　　人手有五指，脚有五趾，头有五官，体有五感，本来就和人类自身的生命息息相关（现代基因研究显示，连DNA最基本单元脱氧核苷酸的结构也是五边形的，而且含有5种元素），现在上天又在冥冥之中显示出和5之间有所关联。不知道我们祖先有没有油然产生一种天人合一的感悟。\n　　这些早期因素综合起来，向5赋予了命运的含义。\n　　于是拥有道行的人，用5根手指掐指一算，才有可能能够算出你的运势——神秘的东方道教秘术。（因个人经历我对此既不肯定也不否定。）\n　　五进制影响深远：军队又称行伍，说话要一五一十，算盘横栏上方每颗珠子代表5（3下5除2甚至超脱数学，代表了一种干脆利落的行为模式）。\n\n## 5、6、7，东西方做出选择，文明开始分支\n\n　　在远古的东西方，所有人类都认为，有一个神秘数字，一旦超过它，事情就会发生变化。而且很明显远古时的全球人类是有交流的，大家很好地达成了共识，这个神秘数字就是**6**，东西方同时认为它就是那个由量变导致质变的数字，包括后来由6发展出来的12。\n　　易经所有卦象的第六爻通常预示着一个新境界。\n　　上帝花了六天创造出一个新世界。\n　　这个世界有六道轮回。\n　　埃及最早的金字塔是六层阶梯形的——六级梯形金字塔。\n\n　　不过，同样面对变化，东西方却分别做了不同的选择。\n　　西方倾向于未来——7，变化之后的数字。\n　　而东方倾向于现在——5，变化之前的数字。\n　　这种选择隐含了当年原始人的一些生存状态。西方人祖先觉得日常生活充满不确定性和危险，所以宁愿放弃现在而憧憬未来；东方人祖先生活足够稳定富足，所以宁愿抓住现在不放手。\n\n　　西方选择7后，5和10进制就用得少了，直到后来中国通过印度将10进制传到中世纪的欧洲（1202年，费波那契写《计算之书》，但当时影响不大，再过200多年后随着印刷术的扩散，才在欧洲开始流行）。\n　　中国选择5后，7进制也用得少了，但貌似影响并不大。只是近代从西方引入星期的概念，才在很大程度上影响我们的作息规律。\n　　——按我个人理解，人类作息，最好还是采用与生命关系更密切的5或10进制。\n　　不知道元芳会怎么看？\n\n　　西方虽然选择憧憬未来，却认为变化后事情会向坏的方向发展。这种基础认知导致了古代西方的悲剧意识，在古希腊表现得尤其明显。\n　　但我们的祖先很有意思，他们并不规定这种变化是好还是坏——古人认为“七”会由阳转阴，但阴阳本身不分好坏，纯粹只是变化而已，好坏在于时机和你的应对。这也是东西方一个显著的不同之处。\n\n　　选择5还是7，这种差异非常细小，甚至在易变的当代都不算什么事，今天做了个选择明天退货或者换一下就是。但是远古的人类每个决定都是关系种群存亡的大事。严酷的生存压力已经让他们培养出习惯，对于部落集体或首领做出的选择，会象当代的军规一样，非常慎重地传承下来。细节上的差异，将在未来几千年内，默默地影响着东西方不同的文明进程。\n\n　　《左传》有云：“国之大事，在祀与戎。”\n　　人类祖先从自身和天文观测中发展建立起来的早期数学系统，就这样不知不觉中影响着国之大事。\n\n　　比如今天的5G部署，只有中国运营商比如中国电信选择了选项3x（直接上全新的5G设备），因为梦想更大；而全球很多领先运营商都宣布支持选项3系列（尽量重用旧的4G设备），以实现最初的5G NR部署。\n","tags":["祖先","天文","数学","命运"],"categories":["人文"]},{"title":"远古人类进化","url":"/blog/human/-undefined.html","content":"#### 远古人类，至少已经是几十万年前的事情，和现在的我们有毛线关系？\n\n#### 远古历史迷雾重重。一旦了解了当年的人类是在怎样的环境下，凭借哪些天赋、通过怎样的过程、手段最终达到这颗星球万物之灵的统治地位的，就有可能帮助我们回答下面这些问题：我是谁？我从哪里来？怎样来？最重要的是，会不会在最得意忘形的时候，我们突然遭遇灭绝事件，或被另外一个物种取代？\n\n&nbsp;\n&nbsp;\n\n## 智人不是好人，却是多种“人类”中的唯一幸运儿，幸存原因很可能是因为不够理智\n　　人类进化，就是人类从一种现在已经灭绝的灵长类动物，发展到地球统治者的过程。从生态学角度看，我们现代人类是智人，是一种具有文化、直立行走的物种，生活在地面上，很可能最早在约315,000年前在非洲进化。\n​　　现在的我们，是许多动物学家所称的人类部落Hominini中唯一还活着的成员，但是有大量的化石证据表明，我们的祖先智人（英文“Homo sapiens”，拉丁文“wise man”）出现之前数百万年，地球上就已经有其他人类，例如地猿、非洲南方古猿和同属Homo种的其他人类。\n​　　是的，不算第一个智人出现之前的那些在生物学上已经可以被称为人类的物种，光是智人自己，就还有一系列以英文“Homo”开头的生物学上同种的兄弟姐妹。但现代人很干脆地只有智人这一个祖先，“Homo”家族其余人种都没有后代存活到现在。\n​　　当时，这些古人类因为很近的亲缘关系，相互之间并没有产生完全的生殖隔离，这使得现代人携带有极少量的其他古人类的基因。就算几十万年前，我们的直系祖先智人出现之后，也和至少一种其他人类共存过一段时间，现在称那种人类为穴居人或尼安德特人（Neanderthals 或 H.neanderthalensis）。\n​　　比如，2017年3月3日《科学》杂志发表题为《中国许昌出土晚更新世古人类头骨研究》的论文称，人类演化研究取得突破性进展：10多万年前生活在河南省许昌市灵井遗址的“许昌人”，可能是中国境内古老人类和欧洲尼安德特人的后代。\n![尼安德特人](/img/2020/homo_sapians/博物馆里的尼安德塔人蜡像.jpg \"尼安德特人\")\n​　　　　*博物馆里的尼安德特人蜡像*\n\n　　最早的古人类化石只在非洲有发现，暂时大家认为智人之前的早期人类统一从非洲起源，然后才逐步扩散到其他地方。\n　　当时交通不发达，那么这些古人类，是不是简单地独立出现、占块地方独立生活、再独自静悄悄地灭绝，而相互间没有联系的呢？非也。通过化石上残留基因物质分析，至少非洲的原始人，他们从190万年前开始，有过至少三次大规模迁徙出非洲的行动。\n　　前两次可能失败了，但这些非洲古人类中的探索者和迁徙途中遇到的“土著”交流过程中保留了少量“土著”基因，然后有部分人类留在当地，若干万年后变成后来者眼中的“土著”，大部分又迁回非洲，但带回去一些杂交的基因，混入非洲原有种群中继续发展若干万年，等待再次迁徙。\n![走出非洲](/img/2020/homo_sapians/出走归来.jpg \"走出非洲\")\n\n　　直到大约12万~8万年前，进入智人时代的人类第三次迁出非洲行动才真正成功。\n\n![人类世系](/img/2020/homo_sapians/人类血统.jpg \"智人和其他人类\")\n​　　所有这些早期人类，先后都消失了。大约两万四千年前，最后一支有别于智人的人类，尼安德特人，也从地球上消失了。目前基本都认为是后来新出现的人类灭绝了之前出现的人类，而尼安德特人无法推诿地应该是被智人灭绝的。从生存资源上看不出必须要彻底消灭那些种族的原因，现在的猜测是，我们的祖先不是什么好人，不知出于什么原因，竟然将所有异族全部灭绝了。\n\n![头骨比较图](/img/2020/homo_sapians/大猩猩、直立人与智人头骨的比较图.jpg \"头骨比较图\")\n​　　​　　​*大猩猩、直立人与智人头骨的比较图，主要区别在脑容量*\n​　　我们一直以为人类是靠智慧才得以统治地球的，因为我们脑容量够大。化石证据也显示，后期出现的人类，脑容量比前期出现的人类更大，这样优胜劣汰下才能灭绝更早期的人种。可是，尼安德特人却是个例外，他们明显比同期智人脑容量更大、文明程度更高，而且身体更强壮、四肢更发达，不管从智力还是体力上，人类看起来都只有被尼安德特人吊打、反杀的命运。智人和尼安德特人10万年前的第一次相遇也证明了这个结论，可是诡异的是，短短1万多年后，8万年前智人和尼安德特人再次交锋，这次智人就大获全胜。相差1万年的化石看不出差别，提供不了任何“科学”解释。\n\n　　唯一的解释，只能归功于人类的“相对弱智”。\n​　　尼安德特人也是源于非洲，但是他们更早地到达了欧洲。尼安德特人在早期进化过程中，进化的速度和智人应该不相上下，但是在欧洲的日子里，他们进化的速度明显减慢，从他们使用的工具来看，在几万年的时间里，没有明显的改进。尼安德特人以肉食为主，他们发明了长矛捕猎和围猎的方式，但是他们始终没有发明弓箭。在智人到达欧亚大陆之前，他们是欧亚大陆的主人，他们过着相对悠闲的生活，并且开始懂得用贝壳装饰自己。\n​　　尼安德特人作为一种成功的进化者，文明程度比智人高，生存环境好，相互之间没有争斗。而作为被迫走出非洲寻找新的生存地的智人，不得不一直处于战斗中。不仅仅是和猛兽争夺食物这种体力活动，智商相对较低、不够理智的智人应该也没办法彻底消除同类之间的争斗（其实现在也没什么改善，想想两次世界大战），这种智慧同类间的争斗比从虎口夺食的挑战性要危险得多，必须要提高群体组织能力、发挥出群体战斗力，才能占据上风。由此智人的组织能力在一万年时间内迅速发展起来，原地踏步的尼安德特人个体武力值哪怕满分，哪怕掌握有对付猛兽的群体围猎级别的简单合作能力，也不是军队化的智人部落对手，败下阵来也就不足为奇了。\n​　　对于尼安德特人族灭的这段历史，陈虎平老师的微博总结得很有深度——“make yourself uncomfortable！演化天性让你衣食无忧后就歇着。如果同辈一般，你也好不到哪里去。在微博上泡着、看着、评论着，舒服得要死。只有市场突然改变，或经常遇到牛人，让你不爽、无助、心酸，你的原始能量才会重启，重新想办法、找出路、做产品、拼市场。人都是被逼出来的。没人例外。”\n\n\n## 智人灭绝了多少物种？90%的大型动物被智人灭绝（包括所有其他人种）\n\n　　在几万年前，智人开始学会了交流思考，理解能力摆脱了100%实物环境的限制，学会提出一些虚拟的东西，并且相互之间还可以理解对方的意思。现在的传说都是因此而来的。\n　　大约7万年前，智人成功掌握了火，这又是一大重要的突破。当时其他物种并不知道火的威力。掌握火之后，智人学会了直立行走，学会了制作工具，甚至学会了航海。\n　　智人凭借这些在其他物种眼里莫名其妙的东西，甚至穿过了海洋来到了澳大利亚大陆。智人来到这个不一样的地方觉得十分神奇，并且开始了自己的屠戮之旅。\n　　当时全澳大利亚超过90%的巨型动物，都从历史上消失，澳大利亚的整个生态系统重新洗牌，这也是澳大利亚生态系统，数百万年来最重大的一次转型。\n　　大约在12000年前，智人们无意之中，从俄罗斯穿过白令海峡，来到了阿拉斯加，从而正式进入了美洲大陆。\n　　按照历史进程来看，几乎智人迁移到哪里，哪里的动物就要遭殃。\n　　在这个期间，地球的大约200属大型兽类最终只剩100属左右，这个时候智人甚至还没有发明文字和铁器。\n　　这实实在在地证明智人果然不是好人。我们勉强聊以自我安慰的是，假设换成任何另外一支人类崛起，结果也不会好到哪里去，这说明我们并不是唯一的坏人，只是坏人族群中漏网幸存下来的一支。人类，就是地球生物，尤其是大型生物的天敌。\n　　中国大地不愧地大物博之名，在智人发展的早中晚各个时期，都能找到相应的化石。其中，柳江人、资阳人、河套人以及我们历史课本上非常出名的山顶洞人，都属于晚期智人。这个时期，现代意义上的三大人种（蒙古利亚人种——黄种人，尼格罗人种——黑种人，欧罗巴人种——白种人）已经开始形成，人类文明步入了旧石器时代晚期。\n\n　　这里提一下《人类简史》。\n　　不可否认这是一本好书，值得一看，但也仅此而已，不要把里面的话当成金科玉律。比如里面的基本观点之一，人类是靠讲故事来发展的，读下来让我们感觉似乎能说会道夸夸其谈画大饼非常重要，重要到成为种群发展的基本前提，不会说话的人就只能苟延馋喘苦苦度日。作者那么理解是有他自身宗教信仰方面的原因，《圣经》里就认为有能力的人一定也能说会道，这有利于传教。这种理解已经被西方人看作理所当然，但我们不必当真。\n　　因为除了讲故事，中国人还有一个发展手段，“做”。\n　　没错，哪那么多废话，干就完了。\n　　在中国语境里，能说会道可不是什么好词，人没忽悠到，反倒可能让别人提高了警惕。所以很多真正能言善辩之辈反倒表现得温良恭俭让，比如，据记载，中国远古的领袖都是在关键时刻“做”对了事情，才被大家认可坐稳领袖位置的。仅在某些关键时刻，他们才会出来讲讲故事，平时表现得越低调越成功。\n　　默默干事，让中国人在过去几千年的大部分时间里活得都比其他国家好，但也很辛苦。（关于“辛苦”程度，没法量化，所以也没法横向比较同期其它国家国民的辛苦程度。唯一能确认的，就是所有国家百姓都认为自己很辛苦）\n　　鼓励说还是鼓励做，在于统治者面对的对象。能说会道的人是少数，但一个这样的人就可能大范围地鼓动来一批信徒，所以各种宗教都选择了鼓励“说”。相反，只要身体健全的人就能做事，所以对于世俗国家来说，鼓励“做”显然才是增加国民财富应有的做法。\n　　理想情况下，既能讲故事，又能干，那就无敌了。只是恐怕绝大多数人都无法做到。\n\n\n## 达尔文没说过“人是猿的后裔”。只能确定智人这个祖先，还没有清晰完整的进化链\n\n　　英国博物学家查尔斯·达尔文（Charles Darwin）出版了他的巨著《物种起源》（1859年）和《人类后裔》（1871年）。但与大众普遍以为的不同，达尔文从未宣称“人是猿的后裔”。从理论上讲，人类和猿类应该有一个共同的祖先存在于数百万年前。这个祖先物种并不是某一串联谱系链条上的“缺失环节”，而是一个向不同谱系发散的分支节点。举个例子，比如远古时某个灵长类物种生下一对子女。这对子女看不出什么差别，但是某些隐含特征和后来的生存环境使这对子女发生分化，儿子成为猿类祖先，而女儿成为人类祖先。这个著名的虚构故事中，作为人类祖先的这个女儿名叫Lucy。现实中，这种古老的灵长类动物尚未被鉴定，也可能永远无法确定，因为即使在现代人类自身的谱系中，化石的关系仍不清楚。\n​　　虽然从基因上，我们可以确定现存所有人类都是智人这个唯一物种的后代，并含有少量其它古人类基因，比如2010年基于尼安德特人基因组草图的研究结果发现，除非洲人之外的欧亚大陆现代人均有1%∼4%的尼安德特人基因成分贡献，但现代人类自身的谱系关系无法得到一个一致同意的结果，我们还不能清晰地将自身基因完整地按时间和物种顺序串联起来，一直链接到智人这个祖先。\n​　　这种不确定性，使得人类及其幸存者智人的出现，都显现出一些突发性和偶然性的特征，给各种假说提供了丰富的养料。这些未知也正是引导科学家继续探究下去的动力之一。\n","tags":["人类","进化","幸存者","物种灭绝"],"categories":["人文"]},{"title":"PCIe Retimer & Redriver","url":"/blog/tech/PCIeRetimerRedriver-undefined.html","content":"\n# 起源\n\nRetimer 和 Redriver是从PCIe 3.0开始引入的。这两种卡通常用在服务器和存储系统中，用来支持更长的物理通道。目前PCIe4规范正在完善，PCIe5规范也已发布，面对高速连接方面的新挑战，这些扩展工具将如何堆叠起来？\n\n## Redriver\nRedriver是一种大多数为模拟信号的扩展设备，旨在增强信号的高频部分，以抵消由互连模块（中央处理器（CPU）封装，系统板，连接器等）引起的与频率相关的衰减。 Redriver的数据路径通常包括一个连续时间线性均衡器（CTLE），一个宽带增益级和一个线性驱动器。 另外，Redriver通常具有按设定阈值检测输入信号丢失、和输出信号接收器（output receiver，就是一个把输出的差分信号重新接收/镜像回来的反馈电路，用于控制）检测功能。 图1给出了典型的Redriver框图。\n![Redriver](/img/2020/Retimer_and_Redriver/Redriver_block_diagram.jpg \"Redriver\")\n图1：Redriver框图\n\n## Retimer\nRetimer是一种可识别PCIe协议的模拟/数字混合信号设备，能够完全恢复数据，提取嵌入式时钟并使用干净的时钟重新传输数据的新副本。 除了在Redriver中也在使用的CTLE和宽带增益级之外，Retimer还包括时钟和数据恢复（CDR）电路，判决反馈均衡器（DFE）和发送（Tx）有限冲激响应（FIR）驱动器。 有限状态机（FSM）和/或微控制器通常管理CTLE、宽带增益、DFE和FIR驱动程序的自动适配，并实现PCIe的链路训练状态机（LTSSM）。 图2给出了典型的Retimer框图。\n![Retimer](/img/2020/Retimer_and_Redriver/Retimer_block_diagram.jpg \"Retimer\")\n图2：Retimer框图\n\n简单来说，Redriver会放大信号，而Retimer则会重新传输信号的新副本。 图3对此进行了说明，并显示了如何通过Redriver增强衰减的眼图张开度以及如何通过Retimer完全重新生成。 \n![eyeRedriverRetimer](/img/2020/Retimer_and_Redriver/eye_after_redriver_retimer.jpg \"eyeRedriverRetimer\")\n图3：示例，被信道衰减后信号的眼图（左），衰减信号通过redriver后（中），衰减信号通过retimer后（右）\n\nPCIe 4.0正式定义了术语“Retimer”（重定时器），“Redriver”（转接驱动器）和它们的超集“repeater”（中继器），所有这些都属于扩展设备或组件，目的是扩展链路的物理长度。定义是：\nRepeater 中继器：扩展设备的不精确术语。 （此词会引起混乱……请不要使用它！）\nRedriver 转接驱动器：一种非协议可识别的软件透明扩展设备。\nRetimer 重定时器：物理层协议感知、软件透明的扩展设备，形成两个单独的电气链路段。\n","tags":["PCIe"],"categories":["tech"]},{"title":"Hardware Abstract Layer","url":"/blog/tech/HAL-undefined.html","content":"\n# HAL存在的意义\n\n硬件抽象层是介于android内核kernel和上层之间的抽象出来的一层结构。他是对linux驱动的一个封装，对上层提供统一接口，上层应用不必知道下层硬件具体怎么工作的，它屏蔽了底层的实现细节。\n\n它在整个android架构中的位置如下图所示：\n![HAL](/img/2020/android_HAL.png \"HAL\")\n\n传统的linux对硬件的操作基本上在内核空间的linux驱动程序中实现，那么现在为什么要多此一举把对硬件的操作分为HAL和linux驱动两部分呢？而且HAL是属于用户空间，linux驱动属于内核空间。\n其实并不多余，理由是很多的：\n1、Google搭好了HAL的框架，为上层framework通过JNI调用HAL提供了统一的API，硬件开发商或者移植人员只需要按照框架开发即可，无需花费精力在与上层的交互上的实现上，将精力放在HAL层本身的实现上即可。\n2、（更主要的）从商业角度，许多硬件厂商不愿意将自己硬件相关一些核心的东西开源出去，假如将对自己硬件的驱动程序全部放入内核空间驱动程序实现，那么必须遵循GPL协议，是必需开源的。有了HAL层之后，他们可以把一些核心的算法之类的东西的实现放在HAL层，而HAL层位于用户空间，不属于linux内核，和android源码一样遵循的是Apache协议，这个是可以不用开源的。\n\n以上就是HAL层存在的意义。\n\n现在Linux的驱动也有往用户空间转移的趋势。\n","tags":["Android","driver","userspace"],"categories":["tech"]},{"title":"Inter-Symbol Interference II","url":"/blog/tech/无线通信关键问题-undefined.html","content":"\n\n多年前觉得需要科普移动通信，但现在全民造手机，热度足够，就不详写了，反正这种枯燥文章没人看。\n\n\n# 符号间干扰（ISI）的由来\n无线信道较之于有线信道更复杂，复杂的原因在于多径与时变。（另一个无线、有线共有的来源是前一期提过的不合格的滤波器）\n\n## 时变\n通信系统的发射端和接收端需要在信号传送期间确保基础时钟的同步，这样才能高效地利用信道，不至于每个最小的信号发送单位都要经过握手、锁定、确认这样的琐碎过程。\n对于有线通信系统，它们很容易建立发射端和接收端的时钟同步机制，比如直接将其中一端的时钟传给另一端作为参考时钟。两个系统的时钟源同步了，也就解决了信号同步的问题。\n\n可是无线系统不一样，接收端没有办法直接获得发射端的时钟。2003年我们这第一批接触3G通信的人找不到任何已有的设计作为参考，只能自己想办法。\n\n有一点是明确的，基站的时钟信息肯定包含在它所调制、发送出来的信号里。所有信息都只能从基站信号里去找去要！我几乎24小时泡在lab里玩弄 Matlab、信号发生器 和 FPGA，几个月后，边构思边尝试出从接收到的无线信号中解析出基站时钟的方法，分几个步骤逐步收敛到需要的解析精度，并专门设计了一个硬件模块（AFC，自动频率控制）来实现算法运算和状态控制，自动跟踪当前基站的时钟，解决了时变的问题。\n\n虽然理论上这个问题肯定能解，而且欧美有现成方案，但那都是别人的，不会给我们看，而且不适用于中国标准，因为无线帧结构不一样。\n当第一个方案真的从自己手中设计、实现出来，而且心里知道将用到中国第一个商用方案上，确实是喜悦非常的。\n\n## 多径 \n（下面几张蓝色图截自网络，文字自己编辑）\n由于建筑物或自然环境（如山林等）的反射或遮挡，无线信号通常不一定能够走直线，直接从发射端发射被接收端接收。这就是无线信号的多径传输。\n![多径](/img/2020/inter-symbol_inteference/multi_path01.jpg \"多径\")\n\n因为这个原因，假如在发送端发送一个窄的脉冲信号，在接收端会接收多个脉冲，本来最短时延是沿最短路径传输所消耗的时间，现在因为多条路径长短不一，所以时延被扩展了，通常将最后一个到达的脉冲，和最先到达的脉冲的时延差，称为最大时延扩展，用Tmax来表示最大时延扩展。\n![Tmax](/img/2020/inter-symbol_inteference/multi_path02.jpg \"Tmax\")\n\n如果这个时延扩展大于两个发送脉冲之间的时间间隔，则会对下一个脉冲的接收产生干扰。\n如果将这两个脉冲看成符号，这称之为符号间干扰（ISI）。\n![ISI](/img/2020/inter-symbol_inteference/multi_path03.jpg \"ISI\")\n\n\n# 符号间干扰（ISI）的解决\n\n## 时钟同步\n解决时钟同步问题，是无线系统解决ISI问题的第一步。（还有个并列第一步，解决滤波器问题）\n\n## 消除多径干扰\n同步问题解决后，要避免接收信号中，一个符号的波形因扩展到其它符号中而造成的干扰，就要将两次发送符号之间的周期扩大，也就是把符号的宽度扩大。扩大多少呢？至少是大于最大时延扩展。\n![扩大时延](/img/2020/inter-symbol_inteference/multi_path04.jpg \"扩大时延\")\n\n而周期扩大，就意味着速率降低了，速率降低，也就意味着带宽降低了。\n![带宽降低](/img/2020/inter-symbol_inteference/multi_path05.jpg \"带宽降低\")\n\n所以系统设计者对于周期扩大是有个容忍极限的，这个极限可以从他们承诺的系统吞吐率参数推算出来。\n\nPath finding模块的任务就是找出同一个symbol（符号）的第一条径信号（通常是主径）和n条能量依次递减的多径接收信号，对它们的偏移量进行调整、对齐后合并，用于后续计算解析。\n\n至此，符号间干扰最直接的几个因素就解决了，其它因素因为事物普遍联系的原因还会有影响但没这么强烈。\n","tags":["silicon","inter-symbol-inteference","filter","jitter","quantify-precision"],"categories":["tech"]},{"title":"Inter-Symbol Interference I","url":"/blog/tech/无线通信系统早期关键问题之一-undefined.html","content":"\n\n成龙大哥的大哥带头用起一种大砖头似的电话，“大哥大”带火了土豪圈。\n这时中国人连手机的生产都不是主力。几年后，电话变薄时，中国工厂变成手机制造主力了，开始关注上游标准。\n\n1998年，3GPP征求3G协议截稿时间的前一刻，原邮电部电信科技研究院出人意料地向3GPP提交了第一份代表中国的移动通信协议，TD-SCDMA。\n*说实话，虽然曾经做得那么深，现在回头查到是1998年提交的这么“老”的一个协议的时候，有些意外，又似乎有那么点印象。现在只记得10年后开始商用。*\n\n不得不说，当时为了能有所突破，争取被接受，这个方案做了些取舍。类似于买东西的性价比，大家现在一听都知道是什么意思。\n比如，当时为了显示出中国方案的独特性和技术突破，做的最大改变就是信号带宽，中国方案只需要1.28MHz，而欧洲和美国方案都是3.84MHz。\n中国其实没有发明新的无线通信原理，和西方同原理不同带宽，技术实现上肯定有硬伤，无可厚非，这时别想着一步登天技术领先，先露下脸比较重要。\n打工人都已经做好了迎接国外黑的准备。\n可是，真的使劲黑的，却是“自己”人。\n有家老大运营商，觉得自己头铁，这种窄带宽的方案自己肯定不会接，就使劲在各种媒体黑。肯定以为自己在提前黑未来的竞争对手。\n当然，几年后，牌照砸到他家，直接指定他来运营TDD，不知道他们当时是什么心情。\n\n回到技术上，真正的质疑声音中，最关键的一个问题是，这套协议的瓶颈，\n##符号间干扰，中国人能克服吗？\n当然提交标准之前，我们老早在实验室里就验证过了，不至于在原则上出问题。在计算机上这个符号间干扰理论上是可以解决的，人家问的是工程上，毕竟就算今天也没人拿CPU来做手机。这个问题有两层含义:\n1）有没有手机芯片来支持解决ISI问题？国外不会帮中国标准设计芯片，只能自己来。\n2）如果这种芯片有了，经济吗？若是需要很高规格，制造成本、功耗很高，用户买不起、用不起，没有实用价值，这个标准就变成面子工程了。\n\n芯片设计与制造直到现在还在被美国卡脖子，十几年前情况只会更差，当时连芯片设计从业者都不多。中国人连2G芯片都没有设计过，上来就直接要参与3G，能玩得起吗？\n\n我当时误打误撞进了上海莘庄的凯明信息，这个全是海归但比较“土”只知道搞技术的公司。后来这家公司第一颗芯片已经流片出来测试成功，准备开发布会的头天晚上，被另一家连FPGA都没跑（注意不是跑“通”哦）的公司抢了新闻，宣布他们已经设计出中国第一颗3G芯片，公开的指标和我们验证中途的数据一样。\n\n在这里，我最初被分配的是匹配滤波器和AFC，path finding这些基础模块。\n\nMatch filter准备采用的是6阶butterworth滤波器，这个很好说，可问题这是模拟电路，不是分立元件，需要采用特定工艺实现芯片设计。\n当时拿到德州仪器的据说是当时性能最好的ABB（模拟基带）芯片，在仪器上测过它的频响曲线发现应该也是6阶butterworth，但是不够平坦，带宽也比中国标准宽（3.84M vs 1.28M）,需要修改。\n仿真结果显示TI设计这款滤波器没有理论支持，参数是拟合butterworth的频响tuning出来的，对于WCDMA，带内纹波可以接受，可是TDD的话，尤其带宽收窄后，纹波（inband ripple）不能接受。\n这其实就涉及到老外的质疑，符号间干扰的问题了，因为这个滤波器是主要的过滤掉符号带外杂波的技术手段，它的性能直接影响带内信号质量和带外干扰。\n如果能有理论支持，就能够得到理想的频响曲线，ISI问题就解决一半了。\n但几位大牛帮忙查阅了那几年的paper，发现就连这种Bi-CMOS本身都属于很新的技术，有文章提到用这种工艺设计放大器，但还没有提到滤波器，更别提理论指导了。\n当时年轻，完全没有考虑难度地，就决定自己动手，丰衣足食。\n\n![OTA](/img/2020/inter-symbol_inteference/OTA_circuit1.png \"OTA\")\n图1 其中一路跨导放大器电路\n\n![3rdOrderFilter](/img/2020/inter-symbol_inteference/BiCMOS_Filter_circuit1.png \"3rdOrderFilter\")\n图2 这是从网上拷贝的一个3阶elliptic滤波器电路\n6阶butterworth和这个电路形式相似，复杂度增加一倍。其中的Gm模块就是图1里的跨导放大器电路\n\n发扬愚公移山的精神，把6阶滤波器的所有电路都转换成了一堆数学公式，结果原始公式需要两张A4纸才能写下，方程次数达到几十次。\n兴致勃勃帮忙查资料、分析电路的两位海归博士看看两张A4，互喵一眼，无声地问我：“？”\n这时的理智做法是学习德州仪器，也用仿真软件去tune，简单又没有风险。也不可能有人跳出来说这样做技术不够牛——你牛你上啊。\n\n自己挖的坑，含泪也要坚持，我说：“我打算继续。”看到我对自己数学能力的迷之自信，他们就撤了。\n\n之后一个月，就在两件几乎没什么进展的事情上来回切换：大伤脑筋地想AFC（自动频率控制）方案，想不出来就去解公式。\n公式慢慢解，说不定就能解开呢？\n一个月后，方程次数降到了8阶，形式也简化多了，变成六元8次方程组。然后在一次突发的灵感下，真的解开了。\n两张纸最后变成了两层结构的方程组，顶层是六元一次方程组，用它得到的参数结合芯片制程工艺文件，可以进一步确定滤波器包括跨导放大器内部各个器件的size。离最初猜想的麦克斯韦方程的形式相差十万八千里。但那一瞬间就是有种“我是数学家”的错觉。\n\n之后就和美国TI交流了一番，无条件地告诉了他们这个公式，他们态度180度大转弯，热情得不得了。\n后来还答应直接在他们芯片排期中给我们预留部分产能，帮我们生产同款但滤波器改成中国标准的模拟基带芯片。\n\n滤波器的事情解决了，下一步就是AFC（自动频率控制）和path finding，这也是符号间干扰问题的两个关键影响因素。\n\n（十几年后的现在写这篇回想，有些奇怪当时怎么分配任务的，为什么给我这个新人分配的全是比较基础却和 符号间干扰 这种神级问题相关的模块，而大牛们去做看起来非常复杂但肯定确定以及一定能做出来的turbo解码器、联合检测这样的算法模块？估计是因为我加入得最晚。）","tags":["silicon","3GPP","移动通信","协议"],"categories":["tech"]}]